<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="plonetheme.bebest">
<body
  tal:define="portal_state context/@@plone_portal_state;
              portal_url portal_state/portal_url"
  >

<metal:content-core fill-slot="main">
  <metal:content-core define-macro="main">
  <link rel="stylesheet" type="text/css" href="${portal_url}/++theme++plonetheme.bebest/css/leaflet.css" />
  <div tal:define="imgs python:view.getCarouselImages();
                   interval python:view.getCarouselInterval();
                   aboutBgImage python:view.getAboutBgImage();
                   aboutDocuments python:view.getAboutUsDocuments();
                   newsItems python:view.getHomeNews();
                   feature_info_title string:${view/getMapTitle};
                   feature_info_text string:${view/getMapDescription};
                   feature_info_link string:;
                   zoom python:view.getMapZoom();
                   center python:view.getMapCenter();
                   iconsList python:view.getIconsList();
                   geojson python:view.getGeoJSON()">
  
   <metal:macro use-macro="context/bebest_macros/macros/map-bebest" />


 <!-- DEBUT SECTION ABOUT-->
   <section id="bebest-home-about"
            tal:condition="aboutDocuments">
    <img id="scrollreveal" class="hidden-xs"
         tal:attributes="src string:${portal_url}/images/${aboutBgImage}" />
      <!-- class="container-fluid" si nb == 3 -->
      <div class="container"
           tal:define="nbDocs python:len(aboutDocuments);
                       classesAbout python:view.getAboutClasses(nbDocs)">
        <div class="super text-center"
             tal:content="string:${context/description}">What we do</div>
        <div class="row">
        <span tal:omit-tag="" tal:repeat="aboutDocument aboutDocuments">
          <div tal:attributes="class python:classesAbout[repeat.aboutDocument.number - 1]">
            <h2 class="text-center"
                tal:content="string:${aboutDocument/title}">Benthic and coastal biodiversity science</h2>
        <p class="home-content"
           tal:content="string:${aboutDocument/description}">Lorem ipsum
        </p>
          </div>
      </span>
        </div>
      </div>
   </section>
  

    <section id="bebest-home-news"
             class="container w-limit"
             tal:condition="newsItems">
      <div  class="row">
      <div class="super-small text-center">News</div>
      <div id="news-Carousel" 
           class="carousel slide"
           data-ride="carousel"
           data-wrap="true"
           data-pause="false"
           tal:attributes="data-interval string:${interval}">
           <div class="carousel-inner" role="listbox">
           <span tal:omit-tag="" tal:repeat="newsItem newsItems">
             <div tal:condition="python:repeat.newsItem.start" class="item active news-wrapper">
               <div class="news-img img-circle">
               <img tal:define="scale newsItem/@@images"
                      tal:replace="structure python: scale.scale('image', scale='large').tag()"
                      tal:on-error="string: Image cannot be displayed" />
               </div>
               <div class="news-info">
                 <h3>${newsItem/title}</h3>
                 <hr />
                 <p>${newsItem/Description}</p>
                 <a href="#" tal:attributes="href string:${newsItem/absolute_url}"
                             tal:content="string:En savoir plus... / More...">url</a>
                 </div>
             </div>
             <div tal:condition="python:not repeat.newsItem.start" class="item news-wrapper">
               <div class="news-img img-circle">
                 <img tal:define="scale newsItem/@@images"
                        tal:replace="structure python: scale.scale('image', scale='large').tag()"
                        tal:on-error="string: Image cannot be displayed" />
               </div>
               <div class="news-info">
                 <h3>${newsItem/title}</h3>
                 <hr />
                 <p>${newsItem/Description}</p>
                 <a href="#" tal:attributes="href string:${newsItem/absolute_url}"
                             tal:content="string:En savoir plus... / More...">url</a>
                 </div>
             </div>

           </span>
           </div>
        <!-- Left and right controls -->
    <a class="left carousel-control" href="#news-Carousel" role="button" data-slide="prev">
      <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#news-Carousel" role="button" data-slide="next">
      <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
      </div>
      </div>
    </section>

  </div>

  </metal:content-core>
</metal:content-core>

</body>
</html>
  