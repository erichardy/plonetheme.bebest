<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="plonetheme.bebest">

<body>

<metal:content-core fill-slot="main">
  <metal:content-core define-macro="main">
  <div class="container" tal:define="objs python:view.getObjs();">

   <h1 class="bebest-title text-center">
        	${context/title}
   </h1>
   <div tal:define="description context/description"
        class="text-justify col-xs-12">
     <span tal:content="structure string:${description}">description</span>
   </div>
   
   <!-----la gallerie, par ordre alphabetique------>
   <div class="thumbnail-wrapper">
     <span  tal:omit-tag="" tal:repeat="obj objs">
     <div class="thumbnail-mission">
       <a href="" tal:attributes="href string:${obj/absolute_url};
                                  title string:${obj/description}">
	      <div class="header">
             <h4 tal:content="string:${obj/title}">project title</h4>
          </div>
         <img class="img-mission"
             tal:define="scale obj/@@images;
                         image_attr python: 'thumb_pict' if hasattr(obj.aq_inner, 'thumb_pict') else ('main_pict' if hasattr(obj.aq_inner, 'main_pict') else 'image');
                         has_image python: getattr(obj.aq_inner, image_attr) or view.getImageURL(obj)"
             tal:attributes="src python: scale.scale(image_attr, scale='preview') and scale.scale(image_attr, scale='preview').url or view.getImageURL(obj)"
             tal:on-error="string: Image cannot be displayed ${image_attr}" />
      </a>
     </div>
     </span>
   </div>
  </div>
  </metal:content-core>
</metal:content-core>

</body>
</html>